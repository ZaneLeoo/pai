# 通知模块 API 文档

## 目录

- [1. 获取通知列表](#1-获取通知列表)
- [2. 获取未读通知数量](#2-获取未读通知数量)
- [3. 标记通知为已读](#3-标记通知为已读)
- [4. 标记所有通知为已读](#4-标记所有通知为已读)
- [5. 删除通知](#5-删除通知)
- [通知类型说明](#通知类型说明)
- [资源类型说明](#资源类型说明)
- [错误码说明](#错误码说明)
- [注意事项](#注意事项)

## 1. 获取通知列表

### 接口信息

- **接口**: `GET /api/notifications`
- **描述**: 获取当前登录用户的通知列表
- **需要登录**: 是

### 请求参数

| 参数名   | 类型    | 必填 | 默认值 | 说明     |
| -------- | ------- | ---- | ------ | -------- |
| pageNum  | Integer | 否   | 1      | 页码     |
| pageSize | Integer | 否   | 10     | 每页大小 |

### 返回数据

```json
{
  "code": 200,
  "msg": "Success",
  "data": {
    "records": [
      {
        "id": 1,
        "type": "like",
        "receiverId": 123,
        "senderId": 456,
        "title": "收到新点赞",
        "content": "用户A点赞了你的文章《标题》",
        "resourceId": 789,
        "resourceType": "article",
        "isRead": false,
        "createTime": "2024-03-27 10:00:00",
        "updateTime": "2024-03-27 10:00:00",
        "sender": {
          "id": 456,
          "username": "用户A",
          "avatar": "http://example.com/avatar.jpg"
        },
        "receiver": {
          "id": 123,
          "username": "用户B",
          "avatar": "http://example.com/avatar2.jpg"
        }
      }
    ],
    "total": 100,
    "size": 10,
    "current": 1
  }
}
```

## 2. 获取未读通知数量

### 接口信息

- **接口**: `GET /api/notifications/unread/count`
- **描述**: 获取当前登录用户的未读通知数量
- **需要登录**: 是

### 请求参数

无

### 返回数据

```json
{
  "code": 200,
  "msg": "Success",
  "data": 5
}
```

## 3. 标记通知为已读

### 接口信息

- **接口**: `PUT /api/notifications/{notificationId}/read`
- **描述**: 将指定通知标记为已读
- **需要登录**: 是

### 请求参数

| 参数名         | 类型 | 必填 | 说明                |
| -------------- | ---- | ---- | ------------------- |
| notificationId | Long | 是   | 通知 ID（路径参数） |

### 返回数据

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

## 4. 标记所有通知为已读

### 接口信息

- **接口**: `PUT /api/notifications/read/all`
- **描述**: 将当前用户的所有通知标记为已读
- **需要登录**: 是

### 请求参数

无

### 返回数据

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

## 5. 删除通知

### 接口信息

- **接口**: `DELETE /api/notifications/{notificationId}`
- **描述**: 删除指定的通知
- **需要登录**: 是

### 请求参数

| 参数名         | 类型 | 必填 | 说明                |
| -------------- | ---- | ---- | ------------------- |
| notificationId | Long | 是   | 通知 ID（路径参数） |

### 返回数据

```json
{
  "code": 200,
  "msg": "Success",
  "data": null
}
```

## 通知类型说明

| 类型    | 说明     |
| ------- | -------- |
| like    | 点赞通知 |
| comment | 评论通知 |
| follow  | 关注通知 |
| system  | 系统通知 |

## 资源类型说明

| 类型    | 说明 |
| ------- | ---- |
| article | 文章 |
| comment | 评论 |
| user    | 用户 |

## 错误码说明

| 错误码 | 说明           |
| ------ | -------------- |
| 200    | 成功           |
| 400    | 请求参数错误   |
| 401    | 未登录         |
| 403    | 无权限         |
| 404    | 资源不存在     |
| 500    | 服务器内部错误 |

## 注意事项

1. 所有接口都需要用户登录
2. 通知列表按创建时间倒序排序
3. 标记已读和删除操作只能操作自己的通知
4. 未读通知数量实时更新
5. 通知内容支持富文本格式
6. 系统通知的发送者 ID 为 0
7. 通知删除后不可恢复
